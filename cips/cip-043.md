| cip | 43 |
| - | - |
| title | Token burn mechanism |
| description | Allow users to permanently destroy TIA tokens, reducing total supply |
| author | Manav Aggarwal ([@Manav-Aggarwal](https://github.com/Manav-Aggarwal)) |
| discussions-to | <https://forum.celestia.org/t/cip-add-burn-module/2216> |
| status | Draft |
| type | Standards Track |
| category | Core |
| created | 2025-01-14 |

## Abstract

This proposal introduces a burn module (`x/burn`) that allows users to permanently destroy TIA tokens by sending them to a vanity burn address. Tokens sent to this address are automatically burned at the end of each block, reducing the total circulating supply.

## Motivation

The burn mechanism enables deflationary tokenomics on Celestia. For example, rollups could burn a portion of blob fees, or applications could burn protocol revenue. Using a burn address rather than a specialized message simplifies the user experienceâ€”users can burn tokens with a standard `bank send` transaction.

## Specification

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 and RFC 8174.

### New Module: `x/burn`

The burn module manages a special burn address and tracks cumulative burned tokens.

### Burn Address

```text
celestia1nullnullnullnullnullnullnullnull8qanmn
```

This is a vanity address that encodes to "null" repeated 8 times, making it recognizable as a null/void destination. The address has no known private key, ensuring tokens sent there are irrecoverable.

### State

| Key | Type | Description |
|-----|------|-------------|
| `TotalBurned` | `sdk.Coin` | Cumulative utia burned since module activation |

### Supported Transfer Methods

- **Bank Send**: `MsgSend` and `MsgMultiSend` with burn address as recipient
- **IBC Transfer**: `MsgTransfer` with burn address as receiver (inbound transfers validated by middleware)
- **Hyperlane**: Inbound transfers landing at burn address are burned

### Validation: BurnAddressDecorator

The `BurnAddressDecorator` ante handler validates transactions containing:

- `MsgSend` - checks `ToAddress`
- `MsgMultiSend` - checks all `Outputs[].Address`
- `MsgTransfer` (IBC) - checks `Receiver`
- `MsgExec` (authz) - recursively validates all nested messages

If recipient is the burn address, only `utia` denomination is allowed. Transactions attempting to send non-utia tokens to the burn address are rejected.

### Validation: BurnAddressIBCMiddleware

The `BurnAddressIBCMiddleware` intercepts inbound IBC transfers (`OnRecvPacket`). If the receiver is the burn address:

- **Allowed**: Native `utia` (including utia returning from other chains with IBC prefixes like `transfer/channel-0/utia`)
- **Rejected**: Foreign tokens (e.g., `uosmo`, `uatom`, or any non-utia denom)

Rejected transfers receive an error acknowledgement, causing the sender to be refunded on the source chain.

### EndBlocker

At the end of each block:

1. Check burn address `utia` balance
2. If zero, return early (no-op)
3. Transfer tokens from burn address to burn module account
4. Burn tokens from module account (emits SDK `coin_burn` event)
5. Emit `EventBurn` with burner address and amount
6. Update `TotalBurned` state

### Queries

#### TotalBurned

Returns cumulative tokens burned since module activation.

```shell
grpcurl -plaintext localhost:9090 celestia.burn.v1.Query/TotalBurned
```

#### BurnAddress

Returns the burn address for programmatic discovery.

```shell
grpcurl -plaintext localhost:9090 celestia.burn.v1.Query/BurnAddress
```

### Event

```protobuf
message EventBurn {
  string burner = 1;  // Burn address
  string amount = 2;  // Amount burned (e.g., "1000000utia")
}
```

### CLI Usage

```shell
# Bank send
celestia-appd tx bank send <from-key> celestia1nullnullnullnullnullnullnullnull8qanmn 1000000utia

# IBC transfer
celestia-appd tx ibc-transfer transfer <channel> celestia1nullnullnullnullnullnullnullnull8qanmn 1000000utia --from <key>
```

## Parameters

This module introduces no new parameters.

## Rationale

The burn address approach offers several advantages over a dedicated `MsgBurn`:

1. **Simplicity**: Users burn with standard `bank send` rather than learning a new message type
2. **Interoperability**: Supports burning via IBC transfers and Hyperlane without additional message types
3. **Tooling Compatibility**: Works with existing wallets and tools that support bank sends
4. **Discoverability**: The vanity address ("null" repeated 8 times) clearly conveys "tokens go nowhere"

The module tracks `TotalBurned` to enable analytics and dashboards to display cumulative burn statistics.

## Backwards Compatibility

This is a consensus-breaking change that requires a network upgrade. However, it is purely additive (new module, new ante decorator, new IBC middleware) and does not affect existing functionality.

## Test Cases

Test cases are available in the reference implementation:

- Unit tests: `x/burn/keeper_test.go` (EndBlocker, TotalBurned accumulation, event emission, error handling)
- Ante decorator tests: `x/burn/ante/burn_address_decorator_test.go` (MsgSend, MsgMultiSend, MsgTransfer, MsgExec validation)
- IBC middleware tests: `app/ibc_burn_middleware_test.go` (utia allowed, non-utia rejected, multi-hop scenarios)
- Integration tests: `x/burn/test/burn_test.go` (full send-and-burn flow, query tests)

## Security Considerations

1. **Denom Restriction**: Only `utia` can be sent to the burn address. This is enforced by `BurnAddressDecorator` (for local transactions) and `BurnAddressIBCMiddleware` (for IBC transfers). This prevents burning of IBC tokens, Hyperlane tokens, or any other bridged assets. Burning bridged assets would cause accounting discrepancies between chains.

2. **Irreversibility**: Burns are permanent and cannot be undone. The vanity address format makes it visually obvious that tokens are being sent to a special address.

3. **Spam Mitigation**: No rate limiting is implemented as gas costs naturally discourage spam.

4. **ICA Bypass (Accepted Risk)**: ICA host messages bypass the ante handler chain. If an ICA controller on another chain executes `MsgSend` with the burn address as recipient, the burn address restriction is not enforced. Non-utia tokens sent this way would be permanently stuck (not burned, not stolen). This is documented and accepted because:
   - Stuck tokens do not benefit any party (they are not stolen, just inaccessible)
   - ICA usage is uncommon and requires explicit controller setup on another chain
   - The operational complexity of mitigating this edge case outweighs the risk

5. **Hyperlane Inbound**: Hyperlane `MsgProcessMessage` bypasses ante handlers. Non-utia tokens bridged to the burn address via Hyperlane would be permanently stuck. Users should avoid sending non-utia to the burn address via Hyperlane.

## Reference Implementation

The implementation is available at: <https://github.com/celestiaorg/celestia-app/pull/6402>

## Copyright

Copyright and related rights waived via [CC0](https://github.com/celestiaorg/CIPs/blob/main/LICENSE).
